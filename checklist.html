<!DOCTYPE html>
<html>
<head>
  <title>é˜²ç½ã‚°ãƒƒã‚ºãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
  <style>
    body { font-family: sans-serif; }
    h2 { margin-top: 30px; }
    li.checked { background-color: #c8f7c5; }
    button { margin-top: 20px; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>
<div id="floatingCount">ãƒã‚§ãƒƒã‚¯æ¸ˆã¿: 0 / 0</div>
<style>
  #floatingCount {
    position: fixed;
    top: 10px;
    right: 10px;
    background-color: #f0f0f0;
    padding: 8px 12px;
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
    font-weight: bold;
    z-index: 1000;
  }
</style>

  <h1>é˜²ç½ã‚°ãƒƒã‚ºãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h1>

  <h2>åŸºæœ¬ã®å‚™ãˆ</h2>
  <ul id="basic">
    <li><label><input type="checkbox"> é£²æ–™æ°´ï¼ˆ1äºº1æ—¥3ãƒªãƒƒãƒˆãƒ«ï¼‰</label></li>
    <li><label><input type="checkbox"> é£Ÿæ–™ï¼ˆæœ€ä½3æ—¥åˆ†ï¼‰</label></li>
    <li><label><input type="checkbox"> æºå¸¯ãƒ©ã‚¸ã‚ªï¼ˆäºˆå‚™é›»æ± ï¼‰</label></li>
    <li><label><input type="checkbox"> æ‡ä¸­é›»ç¯ï¼ˆäºˆå‚™é›»æ± ï¼‰</label></li>
    <li><label><input type="checkbox"> æºå¸¯é›»è©±ãƒ»å……é›»å™¨</label></li>
  </ul>

  <h2>ç”Ÿæ´»ç”¨å“</h2>
  <ul id="life">
    <li><label><input type="checkbox"> ç¾é‡‘ãƒ»èº«åˆ†è¨¼æ˜æ›¸</label></li>
    <li><label><input type="checkbox"> ç€æ›¿ãˆãƒ»ã‚¿ã‚ªãƒ«</label></li>
    <li><label><input type="checkbox"> é›¨å…·ãƒ»é˜²å¯’å…·</label></li>
    <li><label><input type="checkbox"> ç­†è¨˜ç”¨å…·ãƒ»ãƒ¡ãƒ¢å¸³</label></li>
    <li><label><input type="checkbox"> ãƒ“ãƒ‹ãƒ¼ãƒ«è¢‹ãƒ»ãƒ©ãƒƒãƒ—</label></li>
  </ul>

  <h2>æƒ…å ±ãƒ»é€£çµ¡</h2>
  <ul id="info">
    <li><label><input type="checkbox"> å®¶æ—ã®é€£çµ¡å…ˆãƒ¡ãƒ¢</label></li>
    <li><label><input type="checkbox"> åœ°å›³ãƒ»é¿é›£æ‰€æƒ…å ±</label></li>
    <li><label><input type="checkbox"> ãƒ›ã‚¤ãƒƒã‚¹ãƒ«ï¼ˆåŠ©ã‘ã‚’å‘¼ã¶ãŸã‚ï¼‰</label></li>
  </ul>

  <h2>è¡›ç”Ÿç”¨å“</h2>
  <ul id="hygiene">
    <li><label><input type="checkbox"> ãƒˆã‚¤ãƒ¬ãƒƒãƒˆãƒšãƒ¼ãƒ‘ãƒ¼ãƒ»ãƒ†ã‚£ãƒƒã‚·ãƒ¥</label></li>
    <li><label><input type="checkbox"> æºå¸¯ãƒˆã‚¤ãƒ¬</label></li>
    <li><label><input type="checkbox"> ãƒã‚¹ã‚¯ãƒ»æ¶ˆæ¯’æ¶²</label></li>
    <li><label><input type="checkbox"> æ•‘æ€¥ã‚»ãƒƒãƒˆ</label></li>
  </ul>

  <h2>ãã®ä»–ï¼ˆã‚ã‚‹ã¨ä¾¿åˆ©ï¼‰</h2>
  <ul id="extra">
    <li><label><input type="checkbox"> ã‚¦ã‚§ãƒƒãƒˆãƒ†ã‚£ãƒƒã‚·ãƒ¥</label></li>
    <li><label><input type="checkbox"> ã‚¬ãƒ ãƒ†ãƒ¼ãƒ—</label></li>
    <li><label><input type="checkbox"> è»æ‰‹</label></li>
    <li><label><input type="checkbox"> ä½¿ã„æ¨ã¦ã‚«ã‚¤ãƒ­</label></li>
    <li><label><input type="checkbox"> ã‚µãƒ©ãƒ³ãƒ©ãƒƒãƒ—</label></li>
  </ul>


<script>
  const checklistItems = document.querySelectorAll("input[type='checkbox']");
  const floatingCount = document.getElementById("floatingCount");

  // ãƒã‚§ãƒƒã‚¯æ•°è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆé€šå¸¸è¡¨ç¤ºï¼‰
  const countDisplay = document.createElement("p");
  document.body.insertBefore(countDisplay, document.querySelector("button"));

  // æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ—¥ä»˜è¡¨ç¤ºã‚¨ãƒªã‚¢
  const lastCheckedDisplay = document.createElement("p");
  lastCheckedDisplay.textContent = "æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ—¥ä»˜: ãªã—";
  document.body.insertBefore(lastCheckedDisplay, document.querySelector("button"));

  // ãƒã‚§ãƒƒã‚¯æ•°ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
  function updateCheckCount() {
    const total = checklistItems.length;
    const checked = document.querySelectorAll("input[type='checkbox']:checked").length;
    countDisplay.textContent = "ãƒã‚§ãƒƒã‚¯æ¸ˆã¿: " + checked + " / " + total;
    floatingCount.textContent = "ãƒã‚§ãƒƒã‚¯æ¸ˆã¿: " + checked + " / " + total;

    if (checked === total) {
      alert("ã™ã”ã„ï¼å…¨éƒ¨ãƒã‚§ãƒƒã‚¯ã§ããŸã­ğŸ‰");
    }
  }

  // ä¿å­˜ã•ã‚ŒãŸãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã¨æ—¥ä»˜ã‚’èª­ã¿è¾¼ã‚€
  checklistItems.forEach((item, index) => {
    const saved = localStorage.getItem("check_" + index);
    if (saved === "true") {
      item.checked = true;
      item.closest("li").classList.add("checked");
    }

    item.addEventListener("change", () => {
      localStorage.setItem("check_" + index, item.checked);
      const li = item.closest("li");
      if (item.checked) {
        li.classList.add("checked");
      } else {
        li.classList.remove("checked");
      }

      // æ—¥ä»˜ã‚’ä¿å­˜
      const now = new Date();
      const dateStr = now.toLocaleString("ja-JP");
      localStorage.setItem("lastCheckedDate", dateStr);
      lastCheckedDisplay.textContent = "æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ—¥ä»˜: " + dateStr;

      // ãƒã‚§ãƒƒã‚¯æ•°æ›´æ–°
      updateCheckCount();
    });
  });

  // æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ—¥ä»˜ã‚’è¡¨ç¤º
  const savedDate = localStorage.getItem("lastCheckedDate");
  if (savedDate) {
    lastCheckedDisplay.textContent = "æœ€å¾Œã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ—¥ä»˜: " + savedDate;
  }

  // åˆæœŸè¡¨ç¤º
  updateCheckCount();
</script>

  </body>
</html>

